<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Technical Analysis System Documentation</title>
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            page-break-after: avoid;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 5px;
            page-break-after: avoid;
        }
        h3 {
            color: #7f8c8d;
            margin-top: 20px;
            page-break-after: avoid;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "Courier New", monospace;
            font-size: 0.9em;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            page-break-inside: avoid;
        }
        pre code {
            background: none;
            padding: 0;
        }
        ul, ol {
            margin: 10px 0;
            padding-left: 30px;
        }
        li {
            margin: 5px 0;
        }
        p {
            margin: 10px 0;
        }
        strong {
            color: #2c3e50;
        }
    </style>
</head>
<body>
<h1>Technical Analysis System Documentation</h1>

<h2>Overview</h2>

<p>Automated technical analysis system that calculates buy/sell scores for financial instruments using multiple technical indicators. Analyzes symbols in both USD and Gold denominations across multiple timeframes.</p>

<h2>Quick Start</h2>

<pre><code>
<h1>Run full analysis (all categories)</h1>
<p>./run_full_analysis.sh</p>

<h1>Run specific category</h1>
<p>python technical_analysis.py --category faang_hot_stocks</p>

<h1>Force refresh all data</h1>
<p>python technical_analysis.py --refresh</p>

<h1>Generate visualizations only</h1>
<p>python visualize_scores.py</p>
</code></pre>

<h2>Architecture</h2>

<h3>Data Flow</h3>

<p>1. <strong>Download/Fetch</strong> → Both terms refer to the same operation: retrieving data from yFinance</p>
<p>   - "Downloading" = message for gold prices (GC=F)</p>
<p>   - "Fetching data" = message for regular symbols</p>
<p>   - Both use <code>download_data()</code> function with caching</p>

<p>2. <strong>Cache Check</strong> → Checks if data exists and is fresh</p>
<p>   - Fresh if newer than last Sunday 4 PM UTC</p>
<p>   - Otherwise downloads fresh data</p>

<p>3. <strong>Resample</strong> → Converts daily data to timeframes (1W, 2W, 1M, 2M, 6M)</p>

<p>4. <strong>Calculate Indicators</strong> → Two methods:</p>
<p>   - <code>ta_library</code>: Standard technical analysis library</p>
<p>   - <code>tradingview_library</code>: TradingView-style calculations</p>

<p>5. <strong>Score Calculation</strong> → Combines indicator signals into buy/sell score</p>

<p>6. <strong>Visualization</strong> → Generates HTML tables per category</p>

<h2>Configuration</h2>

<h3>Symbols Configuration (`symbols_config.json`)</h3>

<pre><code>
<p>{</p>
<p>  "category_name": ["SYMBOL1", "SYMBOL2", ...]</p>
<p>}</p>
</code></pre>

<p><strong>Categories:</strong></p>
<ul>
<li>`quantum`: Quantum computing stocks</li>
<li>`miner_hpc`: Mining/HPC companies</li>
<li>`faang_hot_stocks`: FAANG + hot tech stocks</li>
<li>`tech_stocks`: Other tech stocks</li>
<li>`cryptocurrencies`: Crypto pairs (BTC-USD, ETH-USD, etc.)</li>
<li>`precious_metals`: Futures (GC=F, SI=F, etc.)</li>
<li>`index_etfs`: ETFs (SPY, IWM, VTWO)</li>
</ul>

<h2>Technical Indicators</h2>

<h3>Core Indicators (Simplified)</h3>

<p>1. <strong>RSI (14 period)</strong></p>
<p>   - Oversold (<30): +2 points</p>
<p>   - Slightly oversold (30-40): +1 point</p>
<p>   - Overbought (>70): -2 points</p>
<p>   - Approaching overbought (>65): -1 point</p>

<p>2. <strong>Moving Averages</strong></p>
<p>   - EMA50, EMA200: Trend following</p>
<p>   - SMA50, SMA200: Golden/Death Cross detection</p>
<p>   - Price above EMA50: +0.5</p>
<p>   - Price above EMA200: +1</p>
<p>   - Golden Cross (SMA50 > SMA200): +1.5</p>
<p>   - Death Cross: -1.5</p>

<p>3. <strong>GMMA (Guppy Multiple Moving Average)</strong></p>
<p>   - Bullish (all short EMAs above long EMAs): +2</p>
<p>   - Early expansion: +1</p>

<p>4. <strong>MACD</strong></p>
<p>   - Bullish + positive histogram: +1</p>

<p>5. <strong>ATR (Average True Range)</strong></p>
<p>   - <em>Not used for scoring</em> - ATR is displayed as data only</p>
<p>   - Volatility is a risk metric, not a buy/sell signal</p>
<p>   - High volatility can indicate opportunity (crypto, growth stocks)</p>
<p>   - Volatility is already reflected in momentum and price action</p>

<p>6. <strong>Volume</strong></p>
<p>   - Above 120% of 20-day average: +1</p>

<p>7. <strong>Momentum (Rate of Change)</strong></p>
<p>   - Very strong (>15%): +1</p>
<p>   - Strong (8-15%): +0.5</p>
<p>   - Moderate (3-8%): +0.5</p>
<p>   - Very negative (<-15%): -1.5</p>
<p>   - Negative (<-8%): -1</p>

<p>8. <strong>4-Week Low</strong></p>
<p>   - At or near 4-week low: +1</p>

<h3>Removed Indicators</h3>

<ul>
<li>StochRSI (redundant with RSI)</li>
<li>EMA20, SMA20 (kept only 50 and 200)</li>
<li>GMMA compressed (less reliable)</li>
</ul>

<h2>Scoring System</h2>

<p><strong>Starting Score:</strong> 0</p>

<p><strong>Score Interpretation:</strong></p>
<ul>
<li>**≥6**: Great Buy (Dark Green) - Very strong bullish signals</li>
<li>**4-5**: Strong Buy (Medium Green) - Strong bullish signals</li>
<li>**2-3**: OK Buy (Light Green) - Moderate bullish signals</li>
<li>**0-1**: Neutral (Yellow) - Weak/neutral signals</li>
<li>**<0**: Bearish (Red) - Bearish signals</li>
</ul>

<p><strong>Maximum Possible Score:</strong> ~7-8 points</p>

<h2>Data Caching</h2>

<h3>Cache Location</h3>
<p><code>data_cache/{category}/{symbol}.pkl</code></p>

<h3>Refresh Logic</h3>

<p>Data is refreshed if:</p>
<p>1. <code>--refresh</code> flag is passed explicitly</p>
<p>2. Cache doesn't exist</p>
<p>3. Cache is older than last Sunday 4 PM UTC</p>

<p><strong>Weekly Refresh:</strong></p>
<ul>
<li>Ensures weekly closes (Sunday 4 PM UTC) are always captured</li>
<li>No unnecessary downloads during the week</li>
<li>Automatic refresh after Sunday 4 PM UTC</li>
</ul>

<h3>Cache Status</h3>

<p>Output shows <code>(cached)</code> label when using cached data:</p>
<pre><code>
<p>Fetching data... ✓ (1256 rows) (cached) [0.20s]</p>
</code></pre>

<h2>Timeframes</h2>

<p>Analysis performed on calendar-day resampled periods:</p>
<ul>
<li>**1W**: 7 calendar days</li>
<li>**2W**: 14 calendar days</li>
<li>**1M**: 30 calendar days</li>
<li>**2M**: 60 calendar days</li>
<li>**6M**: 180 calendar days</li>
</ul>

<h2>Denominations</h2>

<p>Each symbol is analyzed in:</p>
<p>1. <strong>USD</strong>: Standard USD-denominated prices</p>
<p>2. <strong>Gold</strong>: Price converted to gold terms (price / gold_price)</p>

<p>Gold conversion allows comparison of asset performance relative to gold.</p>

<h2>Output Files</h2>

<h3>Result Files</h3>
<p><code>result_scores/{category}_results.json</code></p>

<p>Contains:</p>
<ul>
<li>All timeframes (1W, 2W, 1M, 2M, 6M)</li>
<li>Both calculation methods (ta_library, tradingview_library)</li>
<li>Both denominations (usd, gold)</li>
<li>Score breakdowns</li>
</ul>

<h3>Visualization Files</h3>
<p><code>visualizations_output/{category}_scores.html</code></p>

<p>HTML tables showing:</p>
<ul>
<li>Scores by timeframe</li>
<li>Color-coded by score range</li>
<li>All indicators and values</li>
</ul>

<h2>Command Line Options</h2>

<pre><code>
<p>python technical_analysis.py [OPTIONS]</p>

<p>Options:</p>
<p>  --category CATEGORY     Process only this category</p>
<p>  --config PATH           Path to symbols config (default: symbols_config.json)</p>
<p>  --calculate-potential   Calculate relative potential (slower)</p>
<p>  --refresh               Force refresh all data (ignore cache)</p>
</code></pre>

<h2>Scripts</h2>

<h3>`run_full_analysis.sh`</h3>
<p>Runs complete pipeline:</p>
<p>1. Data generation for all categories</p>
<p>2. Visualization generation</p>
<p>3. Opens HTML files in browser</p>

<h3>`run_visualization.sh`</h3>
<p>Generates visualizations from existing data and opens them.</p>

<h3>`open_visualizations.sh`</h3>
<p>Opens all HTML visualization files in browser.</p>

<h2>Performance</h2>

<p><strong>Typical Execution Times:</strong></p>
<ul>
<li>With cache: ~3-4 seconds (all categories)</li>
<li>Without cache: ~7-10 seconds (all categories)</li>
<li>Data downloads: ~60-70% of total time</li>
<li>Indicator calculations: ~15-20% of total time</li>
</ul>

<p><strong>Cache Efficiency:</strong></p>
<ul>
<li>100% cache hit rate when data is fresh</li>
<li>Automatic weekly refresh after Sunday 4 PM UTC</li>
</ul>

<h2>Troubleshooting</h2>

<h3>Symbol Not Found</h3>
<p>If a symbol fails to download:</p>
<ul>
<li>Check symbol format (e.g., BTC-USD, GC=F)</li>
<li>Verify symbol exists on Yahoo Finance</li>
<li>Some symbols may not be available on yFinance</li>
</ul>

<h3>Cache Issues</h3>
<p>To force refresh:</p>
<pre><code>
<p>python technical_analysis.py --refresh</p>
</code></pre>

<p>To clear cache manually:</p>
<pre><code>
<p>rm -rf data_cache/*</p>
</code></pre>

<h3>Missing Dependencies</h3>
<p>Install requirements:</p>
<pre><code>
<p>pip install -r requirements.txt</p>
</code></pre>

<h2>Technical Details</h2>

<h3>Calculation Methods</h3>

<p><strong>ta_library:</strong></p>
<ul>
<li>Uses `ta` Python library</li>
<li>Standard technical analysis formulas</li>
<li>More widely used</li>
</ul>

<p><strong>tradingview_library:</strong></p>
<ul>
<li>Uses `tradingview-indicators` library</li>
<li>Matches TradingView platform calculations</li>
<li>More consistent with TradingView charts</li>
</ul>

<p>Both methods use the same yFinance data source, only calculation libraries differ.</p>

<h3>Data Source</h3>

<ul>
<li>**Primary**: yFinance (Yahoo Finance)</li>
<li>**Period**: 5 years of historical data</li>
<li>**Interval**: Daily (1d)</li>
<li>**Auto-adjust**: Disabled (raw prices)</li>
</ul>

<h2>License & Credits</h2>

<p>Technical analysis system for investment research.</p>
<p>Uses yFinance for market data.</p>

</body>
</html>